{"ast":null,"code":"var _jsxFileName = \"/Users/ssaiya/videoBookmark/src/MainElement.js\";\nimport React, { Component } from \"react\";\nimport { Player } from \"video-react\";\nimport { Button, Label, Input } from \"reactstrap\";\nimport \"../node_modules/video-react/dist/video-react.css\";\nimport \"./index.css\";\nimport VideoElementsTable from \"./videoElementsTable.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Main extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      playerSource: \"\",\n      videoMap: [],\n      isUpdated: false\n    };\n    this.handleAddVideo = this.handleAddVideo.bind(this);\n    this.changeSelectedVideo = this.changeSelectedVideo.bind(this);\n    this.addBookmark = this.addBookmark.bind(this);\n  }\n\n  changeSelectedVideo(newUrl) {\n    this.setState({\n      playerSource: newUrl,\n      isUpdated: true\n    });\n  }\n\n  addBookmark(newBookmark, currentTime) {\n    let newVideoMap = this.state.videoMap;\n\n    for (let i = 0; i < this.state.videoMap.length; i++) {\n      if (newVideoMap[i].src === this.state.playerSource) {\n        newVideoMap[i].bookmarks.push({\n          Label: newBookmark,\n          Time: currentTime\n        });\n      }\n    }\n\n    this.setState({\n      videoMap: newVideoMap\n    });\n  }\n\n  handleAddVideo(e) {\n    const labelInput = document.getElementById(\"newVideoLabel\");\n    const newSrcInput = document.getElementById(\"newVideoSrc\");\n    const newLabel = labelInput.value;\n    const newSrc = newSrcInput.value;\n\n    if (newLabel === \"\") {\n      addError(labelInput);\n      return;\n    }\n\n    if (!newSrc || newSrc === \"\" || !isURL(newSrc)) {\n      addError(newSrcInput);\n      return;\n    }\n\n    labelInput.value = \"\";\n    newSrcInput.value = \"\";\n    this.setState({\n      videoMap: this.state.videoMap.concat({\n        label: newLabel,\n        src: newSrc,\n        bookmarks: []\n      })\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"addVideoContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Add Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"newVideoLabel\",\n          id: \"newVideoLabel\",\n          className: \"input\",\n          placeholder: \"Label\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"newVideoSrc\",\n          id: \"newVideoSrc\",\n          className: \"input\",\n          placeholder: \"src\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          id: \"addButton\",\n          type: \"button\",\n          onClick: this.handleAddVideo,\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"videosContainer\",\n        children: /*#__PURE__*/_jsxDEV(VideoElementsTable, {\n          elements: this.state,\n          callback: this.changeSelectedVideo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PlayerCustom, {\n        state: this.state,\n        el: this,\n        addBookmarkToEl: this.addBookmark\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass PlayerCustom extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.oldSrc = \"\";\n    this.state = {};\n    this.seek = this.seek.bind(this);\n    this.addBookmark = this.addBookmark.bind(this);\n  }\n\n  componentDidMount() {\n    // subscribe state change\n    this.player.subscribeToStateChange(this.handleStateChange.bind(this));\n  }\n\n  handleStateChange(state, prevState) {\n    // copy player state to this component's state\n    this.setState({\n      player: state,\n      currentTime: state.currentTime\n    });\n  }\n\n  addBookmark() {\n    let label = document.getElementById(\"bookmarkInput\");\n    let val = label.value;\n\n    if (val) {\n      label.value = \"\";\n      const {\n        player\n      } = this.player.getState();\n      this.props.addBookmarkToEl(val, player.currentTime);\n    } else {\n      addError(label);\n    }\n  }\n\n  seek(seconds) {\n    this.player.actions.seek(seconds);\n  }\n\n  render() {\n    let src = this.props.state.playerSource;\n\n    if (this.player && this.oldSrc !== src) {\n      this.player.load();\n    }\n\n    this.oldSrc = src;\n\n    if (src) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Player, {\n          ref: player => {\n            this.player = player;\n          },\n          videoId: \"video-1\",\n          children: /*#__PURE__*/_jsxDEV(\"source\", {\n            src: src\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bookmarksListContainer\",\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            for: \"bookmarkName\",\n            children: \"Add New Bookmark\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"bookmarkInput\",\n            id: \"bookmarkInput\",\n            className: \"input space\",\n            placeholder: \"Label\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"button\",\n            onClick: this.addBookmark,\n            children: \"Bookmark\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AddBookmarks, {\n            src: src,\n            labels: this.props.state.videoMap,\n            seek: this.seek\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Player, {\n        ref: player => {\n          this.player = player;\n        },\n        videoId: \"video-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nfunction AddBookmarks(props) {\n  let videoMap = props.labels;\n  let src = props.src;\n\n  for (let i = 0; i < videoMap.length; i++) {\n    if (videoMap[i].src === src) {\n      var bookmarks = videoMap[i].bookmarks;\n    }\n  }\n\n  const sorted = bookmarks.sort(function (a, b) {\n    return a.Time - b.Time;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: sorted.map((v, i) => /*#__PURE__*/_jsxDEV(Bookmark, {\n      val: v,\n      seek: props.seek\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 204,\n    columnNumber: 5\n  }, this);\n}\n\n_c = AddBookmarks;\n\nfunction Bookmark(props) {\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"bookmarkContainer\",\n    onClick: () => {\n      props.seek(props.val.Time);\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"bookmarkText\",\n      children: props.val.Label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"bookmarkTime\",\n      children: Math.round(props.val.Time * 100) / 100\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = Bookmark;\n\nfunction addError(el) {\n  el.classList.add(\"err\");\n  setTimeout(function () {\n    el.classList.remove(\"err\");\n  }, 2000);\n} // Helper function to check is input url is valid.\n\n\nfunction isURL(str) {\n  var pattern = new RegExp(\"^(https?:\\\\/\\\\/)?\" + // protocol\n  \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.?)+[a-z]{2,}|\" + // domain name\n  \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" + // OR ip (v4) address\n  \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" + // port and path\n  \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" + // query string\n  \"(\\\\#[-a-z\\\\d_]*)?$\", \"i\"); // fragment locator\n\n  return pattern.test(str);\n}\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AddBookmarks\");\n$RefreshReg$(_c2, \"Bookmark\");","map":{"version":3,"sources":["/Users/ssaiya/videoBookmark/src/MainElement.js"],"names":["React","Component","Player","Button","Label","Input","VideoElementsTable","Main","constructor","props","context","state","playerSource","videoMap","isUpdated","handleAddVideo","bind","changeSelectedVideo","addBookmark","newUrl","setState","newBookmark","currentTime","newVideoMap","i","length","src","bookmarks","push","Time","e","labelInput","document","getElementById","newSrcInput","newLabel","value","newSrc","addError","isURL","concat","label","render","PlayerCustom","oldSrc","seek","componentDidMount","player","subscribeToStateChange","handleStateChange","prevState","val","getState","addBookmarkToEl","seconds","actions","load","AddBookmarks","labels","sorted","sort","a","b","map","v","Bookmark","Math","round","el","classList","add","setTimeout","remove","str","pattern","RegExp","test"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,aAAvB;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,KAAxB,QAAqC,YAArC;AACA,OAAO,kDAAP;AACA,OAAO,aAAP;AACA,OAAOC,kBAAP,MAA+B,yBAA/B;;AAEA,eAAe,MAAMC,IAAN,SAAmBN,SAAnB,CAA6B;AAC1CO,EAAAA,WAAW,CAACC,KAAD,EAAQC,OAAR,EAAiB;AAC1B,UAAMD,KAAN,EAAaC,OAAb;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,YAAY,EAAE,EADH;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXC,MAAAA,SAAS,EAAE;AAHA,KAAb;AAMA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBD,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACD;;AAEDC,EAAAA,mBAAmB,CAACE,MAAD,EAAS;AAC1B,SAAKC,QAAL,CAAc;AACZR,MAAAA,YAAY,EAAEO,MADF;AAEZL,MAAAA,SAAS,EAAE;AAFC,KAAd;AAID;;AAEDI,EAAAA,WAAW,CAACG,WAAD,EAAcC,WAAd,EAA2B;AACpC,QAAIC,WAAW,GAAG,KAAKZ,KAAL,CAAWE,QAA7B;;AACA,SAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKb,KAAL,CAAWE,QAAX,CAAoBY,MAAxC,EAAgDD,CAAC,EAAjD,EAAqD;AACnD,UAAID,WAAW,CAACC,CAAD,CAAX,CAAeE,GAAf,KAAuB,KAAKf,KAAL,CAAWC,YAAtC,EAAoD;AAClDW,QAAAA,WAAW,CAACC,CAAD,CAAX,CAAeG,SAAf,CAAyBC,IAAzB,CAA8B;AAC5BxB,UAAAA,KAAK,EAAEiB,WADqB;AAE5BQ,UAAAA,IAAI,EAAEP;AAFsB,SAA9B;AAID;AACF;;AACD,SAAKF,QAAL,CAAc;AACZP,MAAAA,QAAQ,EAAEU;AADE,KAAd;AAGD;;AAEDR,EAAAA,cAAc,CAACe,CAAD,EAAI;AAChB,UAAMC,UAAU,GAAGC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAnB;AACA,UAAMC,WAAW,GAAGF,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAApB;AACA,UAAME,QAAQ,GAAGJ,UAAU,CAACK,KAA5B;AACA,UAAMC,MAAM,GAAGH,WAAW,CAACE,KAA3B;;AAEA,QAAID,QAAQ,KAAK,EAAjB,EAAqB;AACnBG,MAAAA,QAAQ,CAACP,UAAD,CAAR;AACA;AACD;;AACD,QAAI,CAACM,MAAD,IAAWA,MAAM,KAAK,EAAtB,IAA4B,CAACE,KAAK,CAACF,MAAD,CAAtC,EAAgD;AAC9CC,MAAAA,QAAQ,CAACJ,WAAD,CAAR;AACA;AACD;;AACDH,IAAAA,UAAU,CAACK,KAAX,GAAmB,EAAnB;AACAF,IAAAA,WAAW,CAACE,KAAZ,GAAoB,EAApB;AACA,SAAKhB,QAAL,CAAc;AACZP,MAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWE,QAAX,CAAoB2B,MAApB,CAA2B;AACnCC,QAAAA,KAAK,EAAEN,QAD4B;AAEnCT,QAAAA,GAAG,EAAEW,MAF8B;AAGnCV,QAAAA,SAAS,EAAE;AAHwB,OAA3B;AADE,KAAd;AAOD;;AAEDe,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA,8BACE;AAAK,QAAA,EAAE,EAAC,mBAAR;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,KAAD;AACE,UAAA,IAAI,EAAC,eADP;AAEE,UAAA,EAAE,EAAC,eAFL;AAGE,UAAA,SAAS,EAAC,OAHZ;AAIE,UAAA,WAAW,EAAC;AAJd;AAAA;AAAA;AAAA;AAAA,gBAFF,eAQE,QAAC,KAAD;AACE,UAAA,IAAI,EAAC,aADP;AAEE,UAAA,EAAE,EAAC,aAFL;AAGE,UAAA,SAAS,EAAC,OAHZ;AAIE,UAAA,WAAW,EAAC;AAJd;AAAA;AAAA;AAAA;AAAA,gBARF,eAcE,QAAC,MAAD;AAAQ,UAAA,EAAE,EAAC,WAAX;AAAuB,UAAA,IAAI,EAAC,QAA5B;AAAqC,UAAA,OAAO,EAAE,KAAK3B,cAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAdF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAmBE;AAAK,QAAA,EAAE,EAAC,iBAAR;AAAA,+BACE,QAAC,kBAAD;AACE,UAAA,QAAQ,EAAE,KAAKJ,KADjB;AAEE,UAAA,QAAQ,EAAE,KAAKM;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAnBF,eAyBE,QAAC,YAAD;AACE,QAAA,KAAK,EAAE,KAAKN,KADd;AAEE,QAAA,EAAE,EAAE,IAFN;AAGE,QAAA,eAAe,EAAE,KAAKO;AAHxB;AAAA;AAAA;AAAA;AAAA,cAzBF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAiCD;;AAhGyC;;AAkG5C,MAAMyB,YAAN,SAA2B1C,SAA3B,CAAqC;AACnCO,EAAAA,WAAW,CAACC,KAAD,EAAQC,OAAR,EAAiB;AAC1B,UAAMD,KAAN,EAAaC,OAAb;AAD0B,SAkC5BkC,MAlC4B,GAkCnB,EAlCmB;AAE1B,SAAKjC,KAAL,GAAa,EAAb;AACA,SAAKkC,IAAL,GAAY,KAAKA,IAAL,CAAU7B,IAAV,CAAe,IAAf,CAAZ;AACA,SAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACD;;AACD8B,EAAAA,iBAAiB,GAAG;AAClB;AACA,SAAKC,MAAL,CAAYC,sBAAZ,CAAmC,KAAKC,iBAAL,CAAuBjC,IAAvB,CAA4B,IAA5B,CAAnC;AACD;;AAEDiC,EAAAA,iBAAiB,CAACtC,KAAD,EAAQuC,SAAR,EAAmB;AAClC;AACA,SAAK9B,QAAL,CAAc;AACZ2B,MAAAA,MAAM,EAAEpC,KADI;AAEZW,MAAAA,WAAW,EAAEX,KAAK,CAACW;AAFP,KAAd;AAID;;AAEDJ,EAAAA,WAAW,GAAG;AACZ,QAAIuB,KAAK,GAAGT,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAZ;AACA,QAAIkB,GAAG,GAAGV,KAAK,CAACL,KAAhB;;AACA,QAAIe,GAAJ,EAAS;AACPV,MAAAA,KAAK,CAACL,KAAN,GAAc,EAAd;AACA,YAAM;AAAEW,QAAAA;AAAF,UAAa,KAAKA,MAAL,CAAYK,QAAZ,EAAnB;AACA,WAAK3C,KAAL,CAAW4C,eAAX,CAA2BF,GAA3B,EAAgCJ,MAAM,CAACzB,WAAvC;AACD,KAJD,MAIO;AACLgB,MAAAA,QAAQ,CAACG,KAAD,CAAR;AACD;AACF;;AACDI,EAAAA,IAAI,CAACS,OAAD,EAAU;AACZ,SAAKP,MAAL,CAAYQ,OAAZ,CAAoBV,IAApB,CAAyBS,OAAzB;AACD;;AAGDZ,EAAAA,MAAM,GAAG;AACP,QAAIhB,GAAG,GAAG,KAAKjB,KAAL,CAAWE,KAAX,CAAiBC,YAA3B;;AACA,QAAI,KAAKmC,MAAL,IAAe,KAAKH,MAAL,KAAgBlB,GAAnC,EAAwC;AACtC,WAAKqB,MAAL,CAAYS,IAAZ;AACD;;AACD,SAAKZ,MAAL,GAAclB,GAAd;;AACA,QAAIA,GAAJ,EAAS;AACP,0BACE;AAAA,gCACE,QAAC,MAAD;AACE,UAAA,GAAG,EAAGqB,MAAD,IAAY;AACf,iBAAKA,MAAL,GAAcA,MAAd;AACD,WAHH;AAIE,UAAA,OAAO,EAAC,SAJV;AAAA,iCAME;AAAQ,YAAA,GAAG,EAAErB;AAAb;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,gBADF,eASE;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAA,kCACE,QAAC,KAAD;AAAO,YAAA,GAAG,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,KAAD;AACE,YAAA,IAAI,EAAC,eADP;AAEE,YAAA,EAAE,EAAC,eAFL;AAGE,YAAA,SAAS,EAAC,aAHZ;AAIE,YAAA,WAAW,EAAC;AAJd;AAAA;AAAA;AAAA;AAAA,kBAFF,eAQE,QAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAsB,YAAA,OAAO,EAAE,KAAKR,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARF,eAWE;AAAA;AAAA;AAAA;AAAA,kBAXF,eAYE,QAAC,YAAD;AACE,YAAA,GAAG,EAAEQ,GADP;AAEE,YAAA,MAAM,EAAE,KAAKjB,KAAL,CAAWE,KAAX,CAAiBE,QAF3B;AAGE,YAAA,IAAI,EAAE,KAAKgC;AAHb;AAAA;AAAA;AAAA;AAAA,kBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AA8BD,KA/BD,MA+BO;AACL,0BACE,QAAC,MAAD;AACE,QAAA,GAAG,EAAGE,MAAD,IAAY;AACf,eAAKA,MAAL,GAAcA,MAAd;AACD,SAHH;AAIE,QAAA,OAAO,EAAC;AAJV;AAAA;AAAA;AAAA;AAAA,cADF;AAQD;AACF;;AAnFkC;;AAsFrC,SAASU,YAAT,CAAsBhD,KAAtB,EAA6B;AAC3B,MAAII,QAAQ,GAAGJ,KAAK,CAACiD,MAArB;AACA,MAAIhC,GAAG,GAAGjB,KAAK,CAACiB,GAAhB;;AACA,OAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,QAAQ,CAACY,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,QAAIX,QAAQ,CAACW,CAAD,CAAR,CAAYE,GAAZ,KAAoBA,GAAxB,EAA6B;AAC3B,UAAIC,SAAS,GAAGd,QAAQ,CAACW,CAAD,CAAR,CAAYG,SAA5B;AACD;AACF;;AACD,QAAMgC,MAAM,GAAGhC,SAAS,CAACiC,IAAV,CAAe,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC5C,WAAOD,CAAC,CAAChC,IAAF,GAASiC,CAAC,CAACjC,IAAlB;AACD,GAFc,CAAf;AAGA,sBACE;AAAA,cACG8B,MAAM,CAACI,GAAP,CAAW,CAACC,CAAD,EAAIxC,CAAJ,kBACV,QAAC,QAAD;AAAkB,MAAA,GAAG,EAAEwC,CAAvB;AAA0B,MAAA,IAAI,EAAEvD,KAAK,CAACoC;AAAtC,OAAerB,CAAf;AAAA;AAAA;AAAA;AAAA,YADD;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAOD;;KAlBQiC,Y;;AAoBT,SAASQ,QAAT,CAAkBxD,KAAlB,EAAyB;AACvB,sBACE;AACE,IAAA,SAAS,EAAC,mBADZ;AAEE,IAAA,OAAO,EAAE,MAAM;AACbA,MAAAA,KAAK,CAACoC,IAAN,CAAWpC,KAAK,CAAC0C,GAAN,CAAUtB,IAArB;AACD,KAJH;AAAA,4BAME;AAAM,MAAA,SAAS,EAAC,cAAhB;AAAA,gBAAgCpB,KAAK,CAAC0C,GAAN,CAAU/C;AAA1C;AAAA;AAAA;AAAA;AAAA,YANF,eAOE;AAAM,MAAA,SAAS,EAAC,cAAhB;AAAA,gBACG8D,IAAI,CAACC,KAAL,CAAW1D,KAAK,CAAC0C,GAAN,CAAUtB,IAAV,GAAiB,GAA5B,IAAmC;AADtC;AAAA;AAAA;AAAA;AAAA,YAPF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAaD;;MAdQoC,Q;;AAgBT,SAAS3B,QAAT,CAAkB8B,EAAlB,EAAsB;AACpBA,EAAAA,EAAE,CAACC,SAAH,CAAaC,GAAb,CAAiB,KAAjB;AACAC,EAAAA,UAAU,CAAC,YAAY;AACrBH,IAAAA,EAAE,CAACC,SAAH,CAAaG,MAAb,CAAoB,KAApB;AACD,GAFS,EAEP,IAFO,CAAV;AAGD,C,CAED;;;AACA,SAASjC,KAAT,CAAekC,GAAf,EAAoB;AAClB,MAAIC,OAAO,GAAG,IAAIC,MAAJ,CACZ,sBAAsB;AACpB,qDADF,GACwD;AACtD,+BAFF,GAEkC;AAChC,mCAHF,GAGsC;AACpC,4BAJF,GAI+B;AAC7B,sBANU,EAOZ,GAPY,CAAd,CADkB,CASf;;AACH,SAAOD,OAAO,CAACE,IAAR,CAAaH,GAAb,CAAP;AACD","sourcesContent":["import React, { Component } from \"react\";\nimport { Player } from \"video-react\";\nimport { Button, Label, Input } from \"reactstrap\";\nimport \"../node_modules/video-react/dist/video-react.css\";\nimport \"./index.css\";\nimport VideoElementsTable from \"./videoElementsTable.js\";\n\nexport default class Main extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      playerSource: \"\",\n      videoMap: [],\n      isUpdated: false,\n    };\n\n    this.handleAddVideo = this.handleAddVideo.bind(this);\n    this.changeSelectedVideo = this.changeSelectedVideo.bind(this);\n    this.addBookmark = this.addBookmark.bind(this);\n  }\n\n  changeSelectedVideo(newUrl) {\n    this.setState({\n      playerSource: newUrl,\n      isUpdated: true,\n    });\n  }\n\n  addBookmark(newBookmark, currentTime) {\n    let newVideoMap = this.state.videoMap;\n    for (let i = 0; i < this.state.videoMap.length; i++) {\n      if (newVideoMap[i].src === this.state.playerSource) {\n        newVideoMap[i].bookmarks.push({\n          Label: newBookmark,\n          Time: currentTime,\n        });\n      }\n    }\n    this.setState({\n      videoMap: newVideoMap,\n    });\n  }\n\n  handleAddVideo(e) {\n    const labelInput = document.getElementById(\"newVideoLabel\");\n    const newSrcInput = document.getElementById(\"newVideoSrc\");\n    const newLabel = labelInput.value;\n    const newSrc = newSrcInput.value;\n\n    if (newLabel === \"\") {\n      addError(labelInput);\n      return;\n    }\n    if (!newSrc || newSrc === \"\" || !isURL(newSrc)) {\n      addError(newSrcInput);\n      return;\n    }\n    labelInput.value = \"\";\n    newSrcInput.value = \"\";\n    this.setState({\n      videoMap: this.state.videoMap.concat({\n        label: newLabel,\n        src: newSrc,\n        bookmarks: [],\n      }),\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div id=\"addVideoContainer\">\n          <h1>Add Video</h1>\n          <Input\n            name=\"newVideoLabel\"\n            id=\"newVideoLabel\"\n            className=\"input\"\n            placeholder=\"Label\"\n          />\n          <Input\n            name=\"newVideoSrc\"\n            id=\"newVideoSrc\"\n            className=\"input\"\n            placeholder=\"src\"\n          />\n          <Button id=\"addButton\" type=\"button\" onClick={this.handleAddVideo}>\n            +\n          </Button>\n        </div>\n        <div id=\"videosContainer\">\n          <VideoElementsTable\n            elements={this.state}\n            callback={this.changeSelectedVideo}\n          ></VideoElementsTable>\n        </div>\n        <PlayerCustom\n          state={this.state}\n          el={this}\n          addBookmarkToEl={this.addBookmark}\n        />\n      </div>\n    );\n  }\n}\nclass PlayerCustom extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {};\n    this.seek = this.seek.bind(this);\n    this.addBookmark = this.addBookmark.bind(this);\n  }\n  componentDidMount() {\n    // subscribe state change\n    this.player.subscribeToStateChange(this.handleStateChange.bind(this));\n  }\n\n  handleStateChange(state, prevState) {\n    // copy player state to this component's state\n    this.setState({\n      player: state,\n      currentTime: state.currentTime,\n    });\n  }\n\n  addBookmark() {\n    let label = document.getElementById(\"bookmarkInput\");\n    let val = label.value;\n    if (val) {\n      label.value = \"\";\n      const { player } = this.player.getState();\n      this.props.addBookmarkToEl(val, player.currentTime);\n    } else {\n      addError(label);\n    }\n  }\n  seek(seconds) {\n    this.player.actions.seek(seconds);\n  }\n\n  oldSrc = \"\";\n  render() {\n    let src = this.props.state.playerSource;\n    if (this.player && this.oldSrc !== src) {\n      this.player.load();\n    }\n    this.oldSrc = src;\n    if (src) {\n      return (\n        <div>\n          <Player\n            ref={(player) => {\n              this.player = player;\n            }}\n            videoId=\"video-1\"\n          >\n            <source src={src} />\n          </Player>\n          <div className=\"bookmarksListContainer\">\n            <Label for=\"bookmarkName\">Add New Bookmark</Label>\n            <Input\n              name=\"bookmarkInput\"\n              id=\"bookmarkInput\"\n              className=\"input space\"\n              placeholder=\"Label\"\n            />\n            <Button type=\"button\" onClick={this.addBookmark}>\n              Bookmark\n            </Button>\n            <br></br>\n            <AddBookmarks\n              src={src}\n              labels={this.props.state.videoMap}\n              seek={this.seek}\n            ></AddBookmarks>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <Player\n          ref={(player) => {\n            this.player = player;\n          }}\n          videoId=\"video-1\"\n        ></Player>\n      );\n    }\n  }\n}\n\nfunction AddBookmarks(props) {\n  let videoMap = props.labels;\n  let src = props.src;\n  for (let i = 0; i < videoMap.length; i++) {\n    if (videoMap[i].src === src) {\n      var bookmarks = videoMap[i].bookmarks;\n    }\n  }\n  const sorted = bookmarks.sort(function (a, b) {\n    return a.Time - b.Time;\n  });\n  return (\n    <div>\n      {sorted.map((v, i) => (\n        <Bookmark key={i} val={v} seek={props.seek}></Bookmark>\n      ))}\n    </div>\n  );\n}\n\nfunction Bookmark(props) {\n  return (\n    <span\n      className=\"bookmarkContainer\"\n      onClick={() => {\n        props.seek(props.val.Time);\n      }}\n    >\n      <span className=\"bookmarkText\">{props.val.Label}</span>\n      <span className=\"bookmarkTime\">\n        {Math.round(props.val.Time * 100) / 100}\n      </span>\n    </span>\n  );\n}\n\nfunction addError(el) {\n  el.classList.add(\"err\");\n  setTimeout(function () {\n    el.classList.remove(\"err\");\n  }, 2000);\n}\n\n// Helper function to check is input url is valid.\nfunction isURL(str) {\n  var pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?\" + // protocol\n      \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.?)+[a-z]{2,}|\" + // domain name\n      \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" + // OR ip (v4) address\n      \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" + // port and path\n      \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" + // query string\n      \"(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  ); // fragment locator\n  return pattern.test(str);\n}\n"]},"metadata":{},"sourceType":"module"}